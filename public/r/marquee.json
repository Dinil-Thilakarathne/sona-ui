{
  "name": "marquee",
  "type": "registry:ui",
  "title": "Marquee",
  "description": "The `Marquee` component is a versatile UI element that creates a scrolling marquee effect. It is highly customizable and can adapt to various use cases, such as displaying text or other content in a continuous loop.",
  "files": [
    {
      "path": "registry/sonaui/marquee/marquee.tsx",
      "content": "\"use client\";\n\nimport { useClock } from \"@/hooks/useClock\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  motion,\n  useMotionTemplate,\n  useScroll,\n  useSpring,\n  useTransform,\n  useVelocity,\n} from \"motion/react\";\nimport { forwardRef, useEffect, useRef, useState } from \"react\";\nimport useMeasure from \"react-use-measure\";\n\n// Constants\nconst DEFAULT_DURATION = 10; // Default duration in seconds\n\n// Helper function to calculate the number of marquee items\nconst calculateItemCount = (\n  containerWidth: number,\n  itemWidth: number,\n): number => {\n  return Math.ceil(containerWidth / itemWidth);\n};\n\ninterface MarqueeProps {\n  children: React.ReactNode;\n  className?: string;\n  containerClassName?: string;\n  duration?: number;\n  reverse?: boolean;\n  activeScroll?: boolean;\n  activeHover?: boolean;\n}\n\nexport default function Marquee({\n  children,\n  className,\n  containerClassName,\n  duration = DEFAULT_DURATION,\n  reverse = false,\n  activeScroll = false,\n  activeHover = false,\n}: MarqueeProps) {\n  const ref = useRef<HTMLDivElement | null>(null);\n  const [parentBounds, setParentBounds] = useState({ width: 0, height: 0 });\n  const [marqueeItemRef, marqueeItemBounds] = useMeasure();\n  const [count, setCount] = useState(0);\n  const [activeDirection, setActiveDirection] = useState<boolean>(false);\n  const [speed, setSpeed] = useState(1);\n  const [isHovered, setIsHovered] = useState(false);\n\n  const [isClient, setIsClient] = useState(false);\n\n  useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  const { scrollY } = useScroll();\n  const scrollVelocity = useVelocity(scrollY);\n  const smoothVelocity = useSpring(scrollVelocity, {\n    damping: 50,\n    stiffness: 400,\n  });\n  const velocityFactor = useTransform(smoothVelocity, [0, 1000], [0, 5], {\n    clamp: false,\n  });\n\n  useEffect(() => {\n    if (ref.current && isClient) {\n      if (ref.current.parentElement) {\n        const { width, height } =\n          ref.current.parentElement.getBoundingClientRect();\n        setParentBounds({ width, height });\n      }\n    }\n  }, [ref, isClient]);\n\n  // Update item count when dimensions change\n  useEffect(() => {\n    if (marqueeItemBounds.width > 0 && parentBounds.width > 0) {\n      setCount(calculateItemCount(parentBounds.width, marqueeItemBounds.width));\n    }\n  }, [marqueeItemBounds, parentBounds, children]);\n\n  // Update active direction based on velocity\n  useEffect(() => {\n    return velocityFactor.on(\"change\", (value) => {\n      setActiveDirection(value < 0);\n    });\n  }, [velocityFactor]);\n\n  // Update speed dynamically based on velocity factor\n  useEffect(() => {\n    const unsubscribe = velocityFactor.on(\"change\", (value) => {\n      setSpeed(activeScroll && value > 0 ? value : 1);\n    });\n\n    return () => unsubscribe();\n  }, [velocityFactor, activeScroll]);\n\n  // Update speed when hovered\n  useEffect(() => {\n    if (!activeHover) return;\n    if (isHovered) {\n      setSpeed(0);\n    } else {\n      setSpeed(activeScroll ? velocityFactor.get() : 1);\n    }\n  }, [isHovered, activeScroll, velocityFactor, activeHover]);\n\n  const clock = useClock({\n    defaultValue: Date.now(),\n    reverse: activeScroll ? activeDirection : reverse,\n    speed,\n  }).value;\n\n  const progress = useTransform(clock, (time) => (time % duration) / duration);\n  const percentage = useTransform(progress, (t) => t * 100);\n  const translateX = useMotionTemplate`-${percentage}%`;\n\n  return (\n    isClient && (\n      <motion.div\n        style={{ translateX }}\n        className={cn(\"flex w-fit space-x-16\", containerClassName)}\n        ref={ref}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        <MarqueeItem className={className} ref={marqueeItemRef}>\n          {children}\n        </MarqueeItem>\n        {Array.from({ length: count }).map((_, i) => (\n          <MarqueeItem\n            key={i}\n            isCopy\n            style={{ left: `calc(${(i + 1) * 100}%)` }}\n          >\n            {children}\n          </MarqueeItem>\n        ))}\n      </motion.div>\n    )\n  );\n}\n\ninterface MarqueeItemProps {\n  children: React.ReactNode;\n  style?: React.CSSProperties;\n  className?: string;\n  isCopy?: boolean;\n}\n\nconst MarqueeItem = forwardRef<HTMLDivElement, MarqueeItemProps>(\n  ({ children, className, isCopy, style }, ref) => {\n    return (\n      <div\n        className={cn(\"w-full text-nowrap\", isCopy && \"absolute\", className)}\n        style={style}\n        ref={ref}\n      >\n        {children}\n      </div>\n    );\n  },\n);\n\nMarqueeItem.displayName = \"MarqueeItem\";\n",
      "type": "registry:ui",
      "target": "components/ui/marquee/marquee.tsx"
    }
  ],
  "dependencies": [
    "react-use-measure"
  ],
  "registryDependencies": []
}